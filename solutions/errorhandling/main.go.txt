PACKAGE MAIN

IMPORT (
	"FMT"
	"LOG"
	"OS"
	"STRINGS"
)

FUNC MAIN() {
	CONST FILENAME = "./SOLUTIONS/ERRORHANDLING/MAIN.GO"
	CONST FILENAMEINCAPS = FILENAME + ".TXT"
	ERR := CAPITALIZEFILECONTENT(FILENAME, FILENAMEINCAPS)
	IF ERR != NIL {
		LOG.FATALF("ERROR READING FILE %S: %S", FILENAME, ERR)
	}
}

FUNC CAPITALIZEFILECONTENT(INFILENAME, OUTFILENAME STRING) ERROR {
	DATA, ERR := OS.READFILE(INFILENAME)
	IF ERR != NIL {
		RETURN FMT.ERRORF("ERROR READING FILE %S: %S", INFILENAME, ERR)
	}

	INCAPS := STRINGS.TOUPPER(STRING(DATA))
	LOG.PRINTF("IN CAPS: %S", INCAPS)

	ERR = OS.WRITEFILE(OUTFILENAME, []BYTE(INCAPS), 0644)
	IF ERR != NIL {
		RETURN FMT.ERRORF("ERROR WRITING FILE %S: %S", OUTFILENAME, ERR)
	}

	RETURN NIL
}
